# Leggi il messaggio del commit
commit_regex='^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
    echo ""
    echo "ğŸš« COMMIT MESSAGE FORMAT ERROR!"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo ""
    echo "âŒ Your commit message does not follow the required format."
    echo ""
    echo "ğŸ“ REQUIRED FORMAT:"
    echo "   type(scope): description"
    echo ""
    echo "ğŸ·ï¸  ALLOWED TYPES:"
    echo "   â€¢ feat     - A new feature"
    echo "   â€¢ fix      - A bug fix"
    echo "   â€¢ docs     - Documentation changes"
    echo "   â€¢ style    - Code style changes (formatting, etc.)"
    echo "   â€¢ refactor - Code refactoring"
    echo "   â€¢ test     - Adding or updating tests"
    echo "   â€¢ chore    - Maintenance tasks"
    echo ""
    echo "âœ… VALID EXAMPLES:"
    echo "   feat(auth): add login functionality"
    echo "   fix: resolve navigation bug in sidebar"
    echo "   docs: update API documentation"
    echo "   refactor(ui): simplify button component"
    echo "   test: add unit tests for user service"
    echo "   chore: update dependencies"
    echo ""
    echo "ğŸ“ RULES:"
    echo "   â€¢ Description must be 1-50 characters"
    echo "   â€¢ Use lowercase for type and description"
    echo "   â€¢ Scope is optional but recommended"
    echo ""
    echo "ğŸ”„ TO FIX: Edit your commit message and try again"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo ""
    exit 1
fi

echo "âœ… Commit message format is valid!"
